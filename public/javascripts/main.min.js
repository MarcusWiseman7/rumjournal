(e=>{const r=window.location.pathname;if("/"===r&&(e("#login").show(),e("#logout").hide(),document.getElementById("add").disabled=!0,e(".modal").on("shown.bs.modal",function(){e(this).find("[autofocus]").focus()})),"/homepage"===r){e("#logout").show(),e("#login").hide(),document.getElementById("add").disabled=!1;const r=e("#rums-template").html(),t=Handlebars.compile(r);e.ajax({type:"GET",url:"/rums",success:r=>{e("#rums-in-journal").html(t(r))},error:e=>{alert("Error getting rums!")}})}e("#newUser").on("click",()=>{const r={username:e("#username").val(),password:e("#password").val()};e.ajax({type:"POST",url:"/users",data:r,success:e=>{window.location.replace("/homepage"),alert(`Welcome to Rum Journal ${e.user.username}!`)},error:()=>{alert("Error adding user!")}})}),e("#rums-table").delegate(".modalButton","click",function(){const r=e("#show-rum-template").html(),t=Handlebars.compile(r);e.ajax({type:"GET",url:`/add/${this.id}`,success:r=>{e("#show-rum").html(t(r))},error:()=>{alert("Error getting rum!")}})}),e("#showRumModal").delegate(".modalButton","click",function(){const r=e("#rum-edit-template").html(),t=Handlebars.compile(r);e.ajax({type:"GET",url:`/add/${this.id}`,success:r=>{e("#rum-modal-form").html(t(r))},error:()=>{alert("Error getting rum!")}})}),e("#saveRum").on("click",()=>{const r=e("#edit-rumId").val(),t={rumName:e("#edit-rumName").val(),distillery:e("#edit-distillery").val(),style:e("#edit-style").val(),country:e("#edit-country").val(),age:e("#edit-age").val(),price:e("#edit-price").val(),location:e("#edit-location").val(),rating:e("#edit-rating").val(),notes:e("#edit-notes").val()};e.ajax({type:"PATCH",url:`/add/${r}`,data:t,success:e=>{alert(`Updated ${e.rum.rumName}`),window.location.reload()},error:()=>{alert("Error saving rum!")}})}),e("#deleteRum").on("click",()=>{const r=e("#edit-rumId").val();e.ajax({type:"DELETE",url:`/add/${r}`,success:e=>{alert(`Deleted ${e.rum.rumName}`),window.location.reload()},error:()=>{alert("Error deleting rum!")}})})})(jQuery);